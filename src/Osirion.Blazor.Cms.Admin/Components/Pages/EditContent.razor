@page "/osirion/content/edit"
@rendermode InteractiveServer

@using Osirion.Blazor.Cms.Admin.Features.ContentEditor.Components

<AdminPage Title="@GetPageTitle()" Subtitle="@GetPageSubtitle()">
@*     <BreadcrumbItems>
        @(new BreadcrumbItem("Dashboard", "/admin"))
        @(new BreadcrumbItem("Content", "/admin/content"))
        @(new BreadcrumbItem(GetPageTitle()))
    </BreadcrumbItems> *@
    
    <ActionsTemplate>
        <button type="button" 
                class="osirion-admin-button osirion-admin-button-secondary"
                @onclick="GoToContentBrowser">
            <span class="osirion-admin-button-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="11 17 6 12 11 7"></polyline>
                    <path d="M18 19v-2a4 4 0 0 0-4-4H6"></path>
                </svg>
            </span>
            Back to Content
        </button>
    </ActionsTemplate>

    <ChildContent>
        <div class="osirion-admin-edit-content-page">
            @if (IsLoading)
            {
                <div class="osirion-admin-loading">
                    <div class="osirion-admin-loading-spinner"></div>
                    <span>Loading content...</span>
                </div>
            }
            else if (AdminState.EditingPost == null || !AdminState.IsEditing)
            {
                <div class="osirion-admin-empty-state">
                    <div class="osirion-admin-empty-state-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                            <polyline points="14 2 14 8 20 8" />
                            <line x1="16" y1="13" x2="8" y2="13" />
                            <line x1="16" y1="17" x2="8" y2="17" />
                            <polyline points="10 9 9 9 8 9" />
                        </svg>
                    </div>
                    <h2 class="osirion-admin-empty-state-title">No Content Selected</h2>
                    <p class="osirion-admin-empty-state-message">
                        Select a file from the content browser or create a new post to get started.
                    </p>
                    <div class="osirion-admin-empty-state-actions">
                        <button type="button"
                                class="osirion-admin-button osirion-admin-button-primary"
                                @onclick="CreateNewPost">
                            Create New Post
                        </button>
                        <button type="button"
                                class="osirion-admin-button osirion-admin-button-secondary"
                                @onclick="GoToContentBrowser">
                            Browse Content
                        </button>
                    </div>
                </div>
            }
            else
            {
                <div class="osirion-admin-editor-container">
                    <ContentEditor OnSaveComplete="HandleSaveComplete"
                                   OnDiscard="HandleDiscardChanges" />
                </div>
            }
        </div>
    </ChildContent>
</AdminPage>