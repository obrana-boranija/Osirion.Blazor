/* 
 * Osirion Infinite Logo Carousel Component
 * CSS-only, SSR compatible
 */

.osirion-infinite-carousel {
    --osirion-logo-width: 200px;
    --osirion-logo-height: 80px;
    --osirion-logo-gap: 24px;
    --osirion-carousel-duration: 60s;

    padding: var(--osirion-spacing-6, 2rem) 0;
    background-color: transparent;
    transition: background-color 0.3s ease;
    position: relative;
}

.osirion-carousel-header {
    text-align: center;
    margin-bottom: var(--osirion-spacing-4, 1rem);
}

.osirion-carousel-title {
    font-size: var(--osirion-font-size-2xl, 2rem);
    font-weight: var(--osirion-font-weight-semibold, 600);
    color: var(--osirion-text-primary);
    margin: 0 0 var(--osirion-spacing-4, 1rem) 0;
    transition: color 0.3s ease;
}

.osirion-carousel-container {
    max-width: var(--osirion-max-width-7xl, 1440px);
    height: var(--osirion-logo-height);
    margin: 0 auto;
    padding: 0 var(--osirion-spacing-12, 3rem);
    box-sizing: border-box;
    position: relative;
    display: flex;
    align-items: center;
}

.osirion-carousel-wrapper {
    height: var(--osirion-logo-height);
    display: flex;
    position: relative;
    overflow: hidden;
    width: 100%;
    flex: 1;
    mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
    -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
}

.osirion-carousel-list {
    display: flex;
    flex-direction: row;
    gap: var(--osirion-logo-gap);
    height: var(--osirion-logo-height);
    list-style: none;
    margin: 0;
    padding: 0;
    will-change: transform;
    flex-shrink: 0;
    animation-name: osirion-slide-right;
    animation-duration: var(--osirion-carousel-duration);
    animation-timing-function: linear;
    animation-iteration-count: infinite;
}

/* Reverse animation when the reverse class is present on the root */
.osirion-infinite-carousel.osirion-carousel-reverse .osirion-carousel-list {
    animation-name: osirion-slide-left;
}

.osirion-logo-item {
    min-width: var(--osirion-logo-width);
    width: var(--osirion-logo-width);
    height: var(--osirion-logo-height);
    display: flex;
    align-items: center;
    justify-content: center;
    list-style: none;
    transition: filter 0.3s ease-in-out;
    flex-shrink: 0;
    border-radius: var(--osirion-border-radius, 0.5rem);
    position: relative;
    overflow: hidden;
    contain: layout style paint;
}

.osirion-logo-item a {
    display: flex;
    width: 100%;
    height: 100%;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    border-radius: inherit;
    position: relative;
    overflow: hidden;
    contain: layout style paint;
}

.osirion-logo-item img {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    object-fit: contain;
    display: block;
    border-radius: var(--osirion-border-radius-sm, 0.25rem);
    transition: filter 0.3s ease;
}

/* DUAL LOGO SUPPORT */
.osirion-logo-dual { display: flex; overflow: hidden; position: relative; }
.osirion-logo-dual a { display: flex; overflow: hidden; }
.osirion-logo-dual .osirion-logo-light,
.osirion-logo-dual .osirion-logo-dark {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 85%;
    max-height: 85%;
}
.osirion-logo-dual .osirion-logo-light { display: block; }
.osirion-logo-dual .osirion-logo-dark { display: none; }

/* Dark theme switching */
html[data-bs-theme="dark"] .osirion-logo-dual .osirion-logo-light,
[data-bs-theme="dark"] .osirion-logo-dual .osirion-logo-light,
:root[data-theme="dark"] .osirion-logo-dual .osirion-logo-light,
[data-theme="dark"] .osirion-logo-dual .osirion-logo-light,
.dark-theme .osirion-logo-dual .osirion-logo-light,
.theme-dark .osirion-logo-dual .osirion-logo-light,
.osirion-theme-dark .osirion-logo-dual .osirion-logo-light { display: none; }
html[data-bs-theme="dark"] .osirion-logo-dual .osirion-logo-dark,
[data-bs-theme="dark"] .osirion-logo-dual .osirion-logo-dark,
:root[data-theme="dark"] .osirion-logo-dual .osirion-logo-dark,
[data-theme="dark"] .osirion-logo-dual .osirion-logo-dark,
.dark-theme .osirion-logo-dual .osirion-logo-dark,
.theme-dark .osirion-logo-dual .osirion-logo-dark,
.osirion-theme-dark .osirion-logo-dual .osirion-logo-dark { display: block; }

/* System preference support */
@media (prefers-color-scheme: dark) {
    html:not([data-theme]):not([data-bs-theme]) .osirion-logo-dual .osirion-logo-light { display: none; }
    html:not([data-theme]):not([data-bs-theme]) .osirion-logo-dual .osirion-logo-dark { display: block; }
}

/* HOVER EFFECTS */
.osirion-logo-dual:hover .osirion-logo-light,
.osirion-logo-dual:hover .osirion-logo-dark { filter: brightness(1.2) contrast(1.1); }

/* GRAYSCALE SUPPORT */
.osirion-carousel-grayscale-enabled .osirion-logo-grayscale img { filter: grayscale(1) opacity(0.7); }
.osirion-carousel-grayscale-enabled .osirion-logo-grayscale:hover img { filter: grayscale(0) opacity(1) brightness(1.1); }

/* Non-grayscale logos */
.osirion-logo-item:not(.osirion-logo-grayscale) img { filter: opacity(0.9); }
.osirion-logo-item:not(.osirion-logo-grayscale):hover img { filter: opacity(1) brightness(1.1); }

/* ANIMATION KEYFRAMES */
@keyframes osirion-slide-right { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
@keyframes osirion-slide-left  { 0% { transform: translateX(-50%); } 100% { transform: translateX(0); } }

/* Pause animation on hover */
.osirion-infinite-carousel-pausable .osirion-carousel-wrapper:hover .osirion-carousel-list { animation-play-state: paused; }

/* Focus states */
.osirion-logo-item img:focus,
.osirion-logo-item a:focus img {
    outline: var(--osirion-focus-ring-width, 3px) solid var(--osirion-focus-ring-color, rgba(59, 130, 246, 0.5));
    outline-offset: var(--osirion-focus-ring-offset, 2px);
}
.osirion-carousel-grayscale-enabled .osirion-logo-grayscale img:focus,
.osirion-carousel-grayscale-enabled .osirion-logo-grayscale a:focus img { filter: grayscale(0) opacity(1); }
.osirion-logo-dual img:focus { filter: brightness(1.2) contrast(1.1); }

/* Responsive */
@media (max-width: 1024px) { .osirion-carousel-container { padding: 0 var(--osirion-spacing-4, 1rem); } }
@media (max-width: 768px)  {
    .osirion-infinite-carousel { padding: var(--osirion-spacing-6, 1.5rem) 0; }
    .osirion-carousel-title   { font-size: var(--osirion-font-size-xl, 1.5rem); }
    .osirion-logo-item        { min-width: 160px; width: 160px; }
    .osirion-carousel-list    { gap: var(--osirion-spacing-4, 16px); }
}

/* Reduced motion (opt-in by container class) */
@media (prefers-reduced-motion: reduce) {
    .osirion-infinite-carousel.respect-reduced-motion .osirion-carousel-list { animation: none; }
    .osirion-carousel-wrapper { overflow-x: auto; mask-image: none; -webkit-mask-image: none; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }
    .osirion-carousel-wrapper::-webkit-scrollbar { height: 4px; }
    .osirion-carousel-wrapper::-webkit-scrollbar-track { background: var(--osirion-background-secondary); }
    .osirion-carousel-wrapper::-webkit-scrollbar-thumb { background: var(--osirion-text-secondary); border-radius: var(--osirion-border-radius-sm, 0.25rem); }
    .osirion-carousel-wrapper::-webkit-scrollbar-thumb:hover { background: var(--osirion-text-primary); }
}

/* High contrast */
@media (prefers-contrast: high) {
    .osirion-carousel-grayscale-enabled .osirion-logo-grayscale img { filter: contrast(1.3) grayscale(1) opacity(0.9); }
    .osirion-carousel-grayscale-enabled .osirion-logo-grayscale:hover img,
    .osirion-carousel-grayscale-enabled .osirion-logo-grayscale img:focus,
    .osirion-carousel-grayscale-enabled .osirion-logo-grayscale a:focus img { filter: contrast(1.4) grayscale(0) opacity(1); }
    .osirion-logo-item:not(.osirion-logo-grayscale) img { filter: contrast(1.2) opacity(0.95); }
    .osirion-logo-item:not(.osirion-logo-grayscale):hover img { filter: contrast(1.3) opacity(1); }
}
