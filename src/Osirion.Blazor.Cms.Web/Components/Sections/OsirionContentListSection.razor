@namespace Osirion.Blazor.Cms.Components
@inherits OsirionComponentBase
@attribute [StreamRendering]

<section class="@GetSectionClass()">
    @if (!string.IsNullOrWhiteSpace(Title))
    {
        <div class="osirion-section-header">
            <h2 class="osirion-section-title">@Title</h2>
            @if (!string.IsNullOrWhiteSpace(Description))
            {
                <p class="osirion-section-description">@Description</p>
            }
        </div>
    }

    @if (IsLoading)
    {
        <OsirionPageLoading Text="@LoadingText" />
    }
    else if (Items is null || !Items.Any())
    {
        <OsirionContentNotFound />
    }
    else
    {
        <div class="osirion-featured-posts @LayoutClass">
            @foreach (var item in Items)
            {
                <div class="osirion-featured-post">
                    @* <a href="@item.Url" class="osirion-featured-post-image-link"> *@
                        @if (!string.IsNullOrWhiteSpace(item.FeaturedImageUrl))
                        {
                            <div class="osirion-featured-post-image-container">
                                <img src="@item.FeaturedImageUrl" alt="@item.Title" class="osirion-featured-post-image" loading="lazy" />
                            </div>
                        }
                        else
                        {
                            <div class="osirion-featured-post-image-placeholder">
                                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                    <polyline points="21 15 16 10 5 21"></polyline>
                                </svg>
                            </div>
                        }
                    @* </a> *@

                    <div class="osirion-featured-post-content">
                        <a href="@item.Url" class="osirion-featured-post-title-link">
                            <h3 class="osirion-featured-post-title">
                                @item.Title
                            </h3>

                            @if (ShowExcerpt)
                            {
                                <p class="osirion-featured-post-excerpt">@(!string.IsNullOrWhiteSpace(item.Description) ? item.Description : GetExcerpt(item.Content, ExcerptLength))</p>
                            }
                        </a>

                        @if (ShowMetadata)
                        {
                            @if (ShowMetadata)
                            {
                                <OsirionArticleMetdata Author="@item.Author" PublishDate="item.PublishDate" ReadTime="@item.ReadTimeMinutes.ToString()" />
                                @if (item.Categories.Any() && ShowCategories)
                                {
                                    <div class="osirion-featured-post-categories">
                                        @foreach (var category in item.Categories)
                                        {
                                            <a href="@GetCategoryUrl(category)" class="osirion-featured-post-category">
                                                <small>@category</small>
                                            </a>
                                        }
                                    </div>
                                }
                            }
                        }

                        @if (ShowReadMoreLink)
                        {
                            <a href="@item.Url" class="osirion-featured-post-read-more">
                                @ReadMoreText
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </a>
                        }
                    </div>
                </div>
            }
        </div>

        @if (ShowViewAllLink && !string.IsNullOrWhiteSpace(ViewAllUrl))
        {
            <div class="osirion-view-all-container">
                <a href="@ViewAllUrl" class="osirion-view-all-link">
                    @ViewAllText
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </a>
            </div>
        }
    }
</section>