@inherits OsirionComponentBase

<div class="@GetCategoriesListClass()">
    @if (IsLoading)
    {
            <div class="osirion-loading">@LoadingText</div>
    }
    else if (Categories == null || !Categories.Any())
    {
            <div class="osirion-no-categories">@NoContentText</div>
    }
    else
    {
            <ul class="osirion-categories-list">
            @foreach (var category in Categories)
            {
                        <li class="osirion-category-item">
                            <a href="@GetCategoryUrl(category)" class="osirion-category-link" rel="nofollow">
                        @category.Name
                                <span class="osirion-category-count">@category.Count</span>
                            </a>
                        </li>
            }
            </ul>
    }
</div>

@code {
    [Parameter]
    public IReadOnlyList<ContentCategory>? Categories { get; set; }

    [Parameter]
    public bool IsLoading { get; set; }

    [Parameter]
    public string LoadingText { get; set; } = "Loading categories...";

    [Parameter]
    public string NoContentText { get; set; } = "No categories available.";

    [Parameter]
    public Func<ContentCategory, string>? CategoryUrlFormatter { get; set; }

    private string GetCategoriesListClass()
    {
        return $"osirion-categories-list-container {CssClass}".Trim();
    }

    private string GetCategoryUrl(ContentCategory category)
    {
        return CategoryUrlFormatter?.Invoke(category) ?? $"/category/{category.Slug}";
    }
}