"use strict";function initializeLineHighlighting(){var n=new Map;document.querySelectorAll(".line-numbers pre").forEach(function(t,i){initializeCodeBlock(t,i,n)})}function initializeCodeBlock(n,t,i){var u=n.querySelectorAll(".line-numbers-rows > span"),r;u.length&&(r=calculateLineMetrics(n),u.forEach(function(u,f){var e=f+1,o;u.setAttribute("role","button");u.setAttribute("aria-label","Toggle highlight for line "+e);u.setAttribute("tabindex","0");u.style.cursor="pointer";u.replaceWith(u.cloneNode(!0));o=n.querySelectorAll(".line-numbers-rows > span")[f];o.addEventListener("click",function(u){toggleLineHighlight(u,n,t,e,i,r)});o.addEventListener("keydown",function(u){(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),toggleLineHighlight(u,n,t,e,i,r))})}))}function toggleLineHighlight(n,t,i,r,u,f){var o=n.currentTarget,s=n.ctrlKey||n.metaKey,e=u.get(i)||[],h;o.classList.contains("osirion-line-highlighted")?(o.classList.remove("osirion-line-highlighted"),e=e.filter(function(n){return n!==r}),o.setAttribute("aria-pressed","false")):(s||(t.querySelectorAll(".osirion-line-highlighted").forEach(function(n){n.classList.remove("osirion-line-highlighted");n.setAttribute("aria-pressed","false")}),e=[]),o.classList.add("osirion-line-highlighted"),o.setAttribute("aria-pressed","true"),e.includes(r)||e.push(r));e.sort(function(n,t){return n-t});u.set(i,e);createHighlightOverlays(t,e,f);h=o.classList.contains("osirion-line-highlighted")?"highlighted":"unhighlighted";announceLineAction(r,h,s)}function calculateLineMetrics(n){var i=n.querySelector("code"),r,t;return i?(r=window.getComputedStyle(n),t=window.getComputedStyle(i),{lineHeight:parseFloat(r.lineHeight)||20,paddingTop:parseFloat(t.paddingTop)||0,paddingLeft:parseFloat(t.paddingLeft)||0}):null}function createHighlightOverlays(n,t,i){(n.querySelectorAll(".osirion-line-highlight-overlay").forEach(function(n){return n.remove()}),i&&t.length)&&(t.forEach(function(t){var r=document.createElement("div"),u;r.className="osirion-line-highlight-overlay";u=i.paddingTop+(t-1)*i.lineHeight;Object.assign(r.style,{position:"absolute",top:u+"px",left:"0",right:"0",height:i.lineHeight+"px",backgroundColor:"rgba(255, 255, 0, 0.1)",pointerEvents:"none",zIndex:"1"});n.appendChild(r)}),window.getComputedStyle(n).position==="static"&&(n.style.position="relative"))}function announceLineAction(n,t,i){var u=i?"Line "+n+" "+t+". Hold Ctrl or Cmd to select multiple lines.":"Line "+n+" "+t,r=document.createElement("div");r.className="sr-only";r.setAttribute("role","status");r.setAttribute("aria-live","polite");r.textContent=u;document.body.appendChild(r);setTimeout(function(){r.remove()},3e3)}window.initializeLineHighlighting=initializeLineHighlighting;