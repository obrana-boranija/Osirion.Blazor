@namespace Osirion.Blazor.Cms.Components
@inherits OsirionComponentBase

<div class="@GetHomePageClass()">
    @if (IsLoading && IsInteractive)
    {
        <div class="osirion-loading">
            <div class="osirion-spinner"></div>
            <p>@LoadingText</p>
        </div>
    }
    else if (Content is null && !string.IsNullOrWhiteSpace(ContentPath))
    {
        <div class="osirion-not-found">
            <p>@NotFoundText</p>
        </div>
    }
    else
    {
        @if (ShowHero && (HeroContent is not null || !string.IsNullOrWhiteSpace(HeroTitle)))
        {
            <HeroSection 
                Title="@(HeroContent?.Title ?? HeroTitle)"
                Subtitle="@(HeroContent?.Description ?? HeroSubtitle)"
                ImageUrl="@(HeroContent?.FeaturedImageUrl ?? HeroBackgroundImage)"
                PrimaryButtonText="@HeroPrimaryButtonText"
                PrimaryButtonUrl="@HeroPrimaryButtonUrl"
                SecondaryButtonText="@HeroSecondaryButtonText"
                SecondaryButtonUrl="@HeroSecondaryButtonUrl"
                ShowButtons="@ShowHeroButtons"
                Alignment="@HeroAlignment" />
        }

        @if (ShowFeaturedContent && FeaturedItems is not null && FeaturedItems.Any())
        {
            <FeaturedPostsSection
                Title="@FeaturedSectionTitle"
                Description="@FeaturedSectionDescription"
                Posts="@FeaturedItems"
                Layout="@FeaturedLayout"
                Columns="@FeaturedColumns"
                PostCount="@FeaturedCount"
                ShowExcerpt="@ShowFeaturedExcerpt"
                ShowAuthor="@ShowFeaturedAuthor"
                ShowCategories="@ShowFeaturedCategories"
                ViewAllUrl="@FeaturedViewAllUrl"
                ShowViewAllLink="@ShowFeaturedViewAll" />
        }

        @if (Content is not null)
        {
            <ContentSection 
                Content="@Content.Content"
                CssClass="osirion-homepage-content" />
        }

        @if (ShowRecentContent && RecentItems is not null && RecentItems.Any())
        {
            <ContentSection Title="@RecentSectionTitle">
                <ContentList 
                    ContentItems="@RecentItems"
                    ShowPagination="false"
                    ReadMoreText="@ReadMoreText" />
            </ContentSection>
        }

        @if (ShowCategories || ShowTags)
        {
            <ContentSection Title="@BrowseSectionTitle" CssClass="osirion-homepage-browse">
                <div class="osirion-browse-content">
                    @if (ShowCategories)
                    {
                        <div class="osirion-browse-section">
                            <h3>@CategoriesSectionTitle</h3>
                            <CategoriesList 
                                MaxCategories="@MaxCategories"
                                ShowCount="@ShowCategoryCounts"
                                CategoryUrlFormatter="@CategoryUrlFormatter" />
                        </div>
                    }

                    @if (ShowTags)
                    {
                        <div class="osirion-browse-section">
                            <h3>@TagsSectionTitle</h3>
                            <TagCloud 
                                MaxTags="@MaxTags"
                                ShowCount="@ShowTagCounts"
                                TagUrlFormatter="@TagUrlFormatter" />
                        </div>
                    }
                </div>
            </ContentSection>
        }

        @if (!string.IsNullOrWhiteSpace(CustomContent))
        {
            <ContentSection CssClass="osirion-homepage-custom">
                @((MarkupString)CustomContent)
            </ContentSection>
        }

        @if (ChildContent is not null)
        {
            <ContentSection CssClass="osirion-homepage-additional">
                @ChildContent
            </ContentSection>
        }
    }
</div>